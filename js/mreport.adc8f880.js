(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mreport"],{"2635c":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{attrs:{id:"MReport"}},[s("b-row",[s("b-col",{staticClass:"h1 rounded text-white text-center py-3 aino-bg-problem aino-rounded",attrs:{cols:"12"}},[t._v("問題回報")])],1),s("b-form",[s("b-row",{class:{textDark:t.user.themeSwitcher,light:!t.user.themeSwitcher}},[t.user.isLogin?s("b-col",{staticClass:"d-flex align-items-center",attrs:{cols:"12"}},[s("div",{staticClass:"aino-fs mr-3"},[t._v("創作者名稱:")]),s("div",{staticClass:"h4 m-0"},[t._v(t._s(t.user.nickname))])]):t._e(),t.user.isLogin?t._e():s("b-col",{staticClass:"d-flex align-items-center",attrs:{cols:"12"}},[s("div",{staticClass:"aino-fs mr-3"},[t._v("名稱:")]),s("b-form-group",{staticClass:"w-75"},[s("b-form-input",{staticClass:"w-100",attrs:{type:"text",state:t.state.rpnickname},model:{value:t.form.rpnickname,callback:function(e){t.$set(t.form,"rpnickname",e)},expression:"form.rpnickname"}})],1)],1),t.user.isLogin?s("b-col",{staticClass:"d-flex align-items-center",attrs:{cols:"12"}},[s("div",{staticClass:"aino-fs mr-3"},[t._v("創作者帳號:")]),s("div",{staticClass:"h4 m-0"},[t._v(t._s(t.user.account))])]):t._e(),t.user.isLogin?t._e():s("b-col",{staticClass:"d-flex align-items-center",attrs:{cols:"12"}},[s("div",{staticClass:"aino-fs mr-3"},[t._v("E-mail:")]),s("b-form-group",{staticClass:"w-75"},[s("b-form-input",{staticClass:"w-100",attrs:{type:"text",state:t.state.rpemail},model:{value:t.form.rpemail,callback:function(e){t.$set(t.form,"rpemail",e)},expression:"form.rpemail"}})],1)],1),t.user.isLogin?s("b-col",{staticClass:"d-flex align-items-center",attrs:{cols:"12"}},[s("div",{staticClass:"aino-fs mr-3"},[t._v("E-mail:")]),s("div",{staticClass:"h4 m-0"},[t._v(t._s(t.user.email))])]):t._e(),s("b-col",{staticClass:"d-flex align-items-center",attrs:{cols:"12"}},[s("div",{staticClass:"aino-fs mr-3"},[t._v("反映項目:")]),s("b-form-group",{staticClass:"w-75"},[s("b-form-select",{staticClass:"w-100",attrs:{options:t.reportItems,state:t.state.reportItem},model:{value:t.form.reportItem,callback:function(e){t.$set(t.form,"reportItem",e)},expression:"form.reportItem"}})],1)],1),s("b-col",{staticClass:"aino-fs",attrs:{cols:"12"}},[t._v("反映內容敘述:"),s("b-form-group",[s("b-form-textarea",{attrs:{rows:"10","max-rows":"10",type:"text",state:t.state.reportText},model:{value:t.form.reportText,callback:function(e){t.$set(t.form,"reportText",e)},expression:"form.reportText"}})],1)],1),s("b-col",{staticClass:"aino-fs d-flex justify-content-center",attrs:{cols:"12"}},[s("b-form-checkbox",{model:{value:t.check,callback:function(e){t.check=e},expression:"check"}},[t._v("請遵守")]),s("b-link",{attrs:{target:"_blank",to:"/MRules"}},[t._v("本站規則")]),t._v("，若詳閱並同意，請勾選。")],1),s("b-col",{staticClass:"aino-fs d-flex justify-content-center",attrs:{cols:"12"}},[s("b-btn",{attrs:{disabled:!t.check,state:t.state},on:{click:t.report}},[t._v("送出")])],1)],1)],1)],1)},a=[],o=s("5530"),i=s("1da1"),n=(s("96cf"),s("f90c")),c=s.n(n),l={data:function(){return{check:!1,reports:[],form:{rpnickname:"",rpaccount:"匿名創作者",rpemail:"",reportItem:"",reportText:"",processed:!1},reportItems:[{text:"請選擇反映項目",value:""},"帳號相關","活動相關","創作相關","文作瀏覽相關","文作標題不合適","其他問題"]}},computed:{state:function(){return{rpnickname:0===this.form.rpnickname.length?null:this.form.rpnickname.length>1,rpemail:0===this.form.rpemail.length?null:c.a.isEmail(this.form.rpemail),reportItem:0!==this.form.reportItem.length||null,reportText:0===this.form.reportText.length?null:this.form.reportText.length>1}}},methods:{report:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r in s=new FormData,t.form)"_id"!==r&&""===t.user.account?s.append(r,t.form[r]):(t.form.rpnickname=t.user.nickname,t.form.rpaccount=t.user.account,t.form.rpemail=t.user.email);return e.prev=2,e.next=5,t.api.post("/reports",Object(o["a"])({},t.form),{headers:{authorization:"Bearer "+t.user.token}});case 5:a=e.sent,i=a.data,t.reports.push(i.result),t.$router.push("/"),t.$swal({icon:"success",title:"成功",text:"問題回報傳送成功，我們會盡快處理。"}),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](2),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))()}}},m=l,p=(s("f3a2"),s("2877")),u=Object(p["a"])(m,r,a,!1,null,null,null);e["default"]=u.exports},"2e43":function(t,e,s){},f3a2:function(t,e,s){"use strict";s("2e43")}}]);
//# sourceMappingURL=mreport.adc8f880.js.map