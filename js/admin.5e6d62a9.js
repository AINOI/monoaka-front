(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{"0f02":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"my-5",attrs:{id:"adminreports"}},[r("b-row",{staticClass:"mb-5"},[r("b-col",{staticClass:"h1 rounded text-white text-center py-3 aino-bg-primary aino-rounded",class:{labelDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},attrs:{cols:"12"}},[e._v("問題回報管理")])],1),r("b-table",{ref:"table",class:{textDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},attrs:{striped:"",hover:!e.user.themeSwitcher,items:e.reports,fields:e.fields},scopedSlots:e._u([{key:"cell(processState)",fn:function(t){return[e._v(e._s(t.item.processed?"已處理完成":"尚未處理"))]}},{key:"cell(detail)",fn:function(t){return[r("b-btn",{staticClass:"aino-btn-third",on:{click:function(r){return e.adminReportsDetail(t.index)}}},[e._v("詳細狀況")])]}},{key:"cell(delete)",fn:function(t){return[r("b-btn",{staticClass:"aino-btn-danger",on:{click:function(r){return e.adminDeleteReports(t.index)}}},[e._v("刪除")])]}}])}),r("b-modal",{attrs:{id:"modal-adminReportsDetail",size:"lg",centered:"",title:"詳細狀況","ok-title":"處理完成","cancel-title":"尚未處理","ok-variant":"success","cancel-variant":"danger","header-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"body-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"footer-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher}},on:{ok:function(t){return e.reportsState(!0)},cancel:function(t){return e.reportsState(!1)}}},[r("b-row",{staticClass:"border-bottom"},[r("b-col",{staticClass:"d-flex h5",attrs:{cols:"12"}},[e._v("回報人帳號:"),r("div",{staticClass:"mx-3 text-primary"},[e._v(e._s(this.form.rpaccount))])])],1),r("b-row",{staticClass:"border-bottom mt-5"},[r("b-col",{staticClass:"d-flex h5",attrs:{cols:"12"}},[e._v("回報人名稱:"),r("div",{staticClass:"mx-3 text-primary"},[e._v(e._s(this.form.rpnickname))])])],1),r("b-row",{staticClass:"border-bottom mt-5"},[r("b-col",{staticClass:"d-flex h5",attrs:{cols:"12"}},[e._v("回報人E-mail:"),r("div",{staticClass:"mx-3 text-primary"},[e._v(e._s(this.form.rpemail))])])],1),r("b-row",{staticClass:"border-bottom mt-5"},[r("b-col",{staticClass:"d-flex h5",attrs:{cols:"12"}},[e._v("問題類型:"),r("div",{staticClass:"mx-3 text-primary"},[e._v(e._s(this.form.reportItem))])])],1),r("b-row",{staticClass:"mt-5"},[r("b-col",{staticClass:"h5",attrs:{cols:"12"}},[e._v("問題敘述:"),r("div",{staticClass:"reportTextBox px-3 py-3 mt-3",class:{textDark:e.user.themeSwitcher,light:!e.user.themeSwitcher}},[e._v(e._s(this.form.reportText))])])],1)],1),r("b-modal",{attrs:{id:"modal-adminDeleteReports",size:"lg",centered:"","ok-title":"確認刪除","cancel-title":"取消刪除","ok-variant":"danger","cancel-variant":"success","header-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"body-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"footer-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher}},on:{ok:e.deleteReports}},[r("div",{staticClass:"h2 deleteSignal mx-auto my-3"},[r("div",{staticClass:"deleteSignalText"},[e._v("!")])]),r("div",{staticClass:"h2 text-center"},[e._v("是否刪除此回報?")])])],1)},s=[],i=r("1da1"),n=r("5530"),c=(r("a434"),r("96cf"),{data:function(){return{form:{processed:!1},reports:[],fields:[{key:"rpaccount",label:"創作者帳號"},{key:"rpnickname",label:"創作者名稱"},{key:"reportItem",label:"問題類型"},{key:"processState",label:"處理狀況"},{key:"detail",label:"詳細狀況"},{key:"delete",label:"刪除"}]}},methods:{adminReportsDetail:function(e){this.form=Object(n["a"])(Object(n["a"])({},this.reports[e]),{},{index:e}),this.$bvModal.show("modal-adminReportsDetail")},adminDeleteReports:function(e){this.form=Object(n["a"])(Object(n["a"])({},this.reports[e]),{},{index:e}),this.$bvModal.show("modal-adminDeleteReports")},reportsState:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.api.patch("/reports/reportstate/"+t.form._id,{processed:e},{headers:{authorization:"Bearer "+t.user.token}});case 3:a=r.sent,s=a.data,console.log(s.result),t.$swal({icon:"success",title:"成功",text:"此回報問題已完成處理"}),t.reports[t.form.index]=Object(n["a"])(Object(n["a"])({},t.form),{},{processed:e}),t.$refs.table.refresh(),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"處理狀態變更失敗"});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))()},deleteReports:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.processed){t.next=3;break}return e.$swal({icon:"error",title:"錯誤",text:"此回報尚未處理完成"}),t.abrupt("return");case 3:return t.prev=3,t.next=6,e.api.delete("/reports/reportsdelete/"+e.form._id,{headers:{authorization:"Bearer "+e.user.token}});case 6:r=t.sent,a=r.data,console.log(a.result),e.$swal({icon:"success",title:"成功",text:"問題回報刪除成功"}),e.reports.splice(e.form.index,1),e.$refs.table.refresh(),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](3),e.$swal({icon:"error",title:"錯誤",text:"問題回報刪除失敗"});case 17:case"end":return t.stop()}}),t,null,[[3,14]])})))()}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.get("reports/all",{headers:{authorization:"Bearer "+e.user.token}});case 3:r=t.sent,a=r.data,e.reports=a.result,e.reports.reverse(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$swal({icon:"error",title:"錯誤",text:"問題回報取得失敗"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}),l=c,o=(r("da78"),r("2877")),u=Object(o["a"])(l,a,s,!1,null,null,null);t["default"]=u.exports},"19a7":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"my-5",attrs:{id:"adminmembersList"}},[r("b-row",{staticClass:"mb-5"},[r("b-col",{staticClass:"h1 rounded text-white text-center py-3 aino-bg-primary aino-rounded",class:{labelDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},attrs:{cols:"12"}},[e._v("用戶管理")])],1),r("b-table",{ref:"table",class:{textDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},attrs:{striped:"",hover:!e.user.themeSwitcher,items:e.accounts,fields:e.fields},scopedSlots:e._u([{key:"cell(AccountState)",fn:function(t){return[e._v(e._s(t.item.block?"停用中":"啟用中"))]}},{key:"cell(Block)",fn:function(t){return[r("b-btn",{staticClass:"aino-btn-third",on:{click:function(r){return e.adminBlockAccount(t.index)}}},[e._v("停用帳號")])]}},{key:"cell(RetreatMember)",fn:function(t){return[r("b-btn",{staticClass:"aino-btn-wood",on:{click:function(r){return e.adminRetreatMember(t.index)}}},[e._v("恢復帳號")])]}},{key:"cell(DeleteAccount)",fn:function(t){return[r("b-btn",{staticClass:"aino-btn-danger",on:{click:function(r){return e.adminDeleteAccount(t.index)}}},[e._v("刪除")])]}}])}),r("b-modal",{attrs:{id:"modal-adminBlockAccount",size:"lg",centered:"","ok-title":"確認停用","cancel-title":"取消編輯","ok-variant":"danger","cancel-variant":"success","header-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"body-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"footer-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher}},on:{ok:function(t){return e.blockAccount(!0)}}},[r("div",{staticClass:"h2 text-center"},[e._v("是否暫時停用此帳號?")])]),r("b-modal",{attrs:{id:"modal-adminRetreatMember",size:"lg",centered:"","ok-title":"確認重啟","cancel-title":"取消編輯","ok-variant":"danger","cancel-variant":"success","header-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"body-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"footer-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher}},on:{ok:function(t){return e.blockAccount(!1)}}},[r("div",{staticClass:"h2 text-center"},[e._v("是否重新啟用此帳號?")])]),r("b-modal",{attrs:{id:"modal-adminDeleteAccount",size:"lg",centered:"","ok-title":"確認刪除","cancel-title":"取消刪除","ok-variant":"danger","cancel-variant":"success","header-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"body-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"footer-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher}},on:{ok:function(t){return e.deleteAccount()}}},[r("div",{staticClass:"h2 deleteSignal mx-auto my-3"},[r("div",{staticClass:"deleteSignalText"},[e._v("!")])]),r("div",{staticClass:"h2 text-center"},[e._v("是否刪除此帳號?")])])],1)},s=[],i=r("1da1"),n=r("5530"),c=(r("a434"),r("96cf"),{data:function(){return{form:{account:"",nickname:"",email:""},accounts:[],fields:[{key:"account",label:"帳號"},{key:"nickname",label:"創作者名稱"},{key:"email",label:"email"},{key:"AccountState",label:"帳號狀態"},{key:"Block",label:"停用帳號"},{key:"RetreatMember",label:"恢復帳號"},{key:"DeleteAccount",label:"刪除"}]}},methods:{adminBlockAccount:function(e){this.form=Object(n["a"])(Object(n["a"])({},this.accounts[e]),{},{index:e}),this.$bvModal.show("modal-adminBlockAccount")},adminRetreatMember:function(e){this.form=Object(n["a"])(Object(n["a"])({},this.accounts[e]),{},{index:e}),this.$bvModal.show("modal-adminRetreatMember")},adminDeleteAccount:function(e){this.form=Object(n["a"])(Object(n["a"])({},this.accounts[e]),{},{index:e}),this.$bvModal.show("modal-adminDeleteAccount")},blockAccount:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.api.patch("/users/accountstate/"+t.form._id,{block:e},{headers:{authorization:"Bearer "+t.user.token}});case 3:a=r.sent,s=a.data,t.accounts[t.form.index]=Object(n["a"])(Object(n["a"])({},t.form),{},{block:e}),t.$refs.table.refresh(),console.log(s),t.$swal({icon:"success",title:"成功",text:"編輯成功"}),r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),console.log(r.t0),t.$swal({icon:"error",title:"錯誤",text:"編輯失敗"});case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()},deleteAccount:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.delete("/users/deleteaccount/"+e.form._id,{headers:{authorization:"Bearer "+e.user.token}});case 3:r=t.sent,a=r.data,console.log(a.result),e.$swal({icon:"success",title:"成功",text:"使用者資料刪除成功"}),e.accounts.splice(e.form.index,1),e.$refs.table.refresh(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.$swal({icon:"error",title:"錯誤",text:"使用者資料刪除失敗"});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.get("users/getall",{headers:{authorization:"Bearer "+e.user.token}});case 3:r=t.sent,a=r.data,e.accounts=a.result,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$swal({icon:"error",title:"錯誤",text:"使用者資料取得失敗"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}),l=c,o=r("2877"),u=Object(o["a"])(l,a,s,!1,null,null,null);t["default"]=u.exports},"3aa2":function(e,t,r){},"43c0":function(e,t,r){"use strict";r("3aa2")},"459d":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"mt-5",attrs:{id:"admin",fluid:""}},[r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("div",{staticClass:"mx-3 py-3 px-3 aino-rounded bg-white",class:{whiteBoardDark:e.user.themeSwitcher,light:!e.user.themeSwitcher}},[r("b-nav",{attrs:{pills:"",justified:"",vertical:""}},[r("b-nav-item",{staticClass:"gen",attrs:{to:"/admin/admincarousel",exact:"","exact-active-class":"active"}},[e._v("主頁輪播圖管理")]),r("b-nav-item",{staticClass:"gen",attrs:{to:"/admin/adminnovels",exact:"","exact-active-class":"active"}},[e._v("文作管理")]),r("b-nav-item",{staticClass:"gen",attrs:{to:"/admin/adminmembers",exact:"","exact-active-class":"active"}},[e._v("用戶管理")]),r("b-nav-item",{staticClass:"gen",attrs:{to:"/admin/adminreports",exact:"","exact-active-class":"active"}},[e._v("問題回報管理")])],1)],1)]),r("b-col",{staticClass:"mb-5",attrs:{cols:"9"}},[r("div",{staticClass:"mx-3 pt-3 h-100 aino-rounded bg-white",class:{whiteBoardDark:e.user.themeSwitcher,light:!e.user.themeSwitcher}},[r("router-view")],1)])],1)],1)},s=[],i=(r("8b2b"),r("2877")),n={},c=Object(i["a"])(n,a,s,!1,null,null,null);t["default"]=c.exports},"5ed1":function(e,t,r){},6966:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"mt-5",attrs:{id:"adminhome"}},[r("b-row",{staticClass:"mb-5"},[r("b-col",{staticClass:"h1 rounded text-white text-center py-3 aino-bg-primary aino-rounded",class:{labelDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},attrs:{cols:"12"}},[e._v("請選擇管理項目")])],1)],1)},s=[],i=r("2877"),n={},c=Object(i["a"])(n,a,s,!1,null,null,null);t["default"]=c.exports},"859e":function(e,t,r){},"8b2b":function(e,t,r){"use strict";r("5ed1")},b4f3:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"my-5",attrs:{id:"adminnovelsList"}},[r("b-row",{staticClass:"mb-5"},[r("b-col",{staticClass:"h1 rounded text-white text-center py-3 aino-bg-primary aino-rounded",class:{labelDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},attrs:{cols:"12"}},[e._v("文作管理")])],1),r("b-table",{ref:"table",class:{textDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},attrs:{striped:"",hover:!e.user.themeSwitcher,items:e.adminnovels,fields:e.fields},scopedSlots:e._u([{key:"cell(image)",fn:function(t){return[t.item.image?r("img",{staticStyle:{height:"50px"},attrs:{src:t.item.image}}):e._e()]}},{key:"cell(publishState)",fn:function(t){return[e._v(e._s(t.item.publish?"已上架":"下架中"))]}},{key:"cell(unpublish)",fn:function(t){return[r("b-btn",{staticClass:"aino-btn-third",on:{click:function(r){return e.adminUnpublishNovels(t.index)}}},[e._v("編輯")])]}},{key:"cell(republish)",fn:function(t){return[r("b-btn",{staticClass:"aino-btn-wood",on:{click:function(r){return e.adminRepublishNovels(t.index)}}},[e._v("重新上架")])]}},{key:"cell(delete)",fn:function(t){return[r("b-btn",{staticClass:"aino-btn-danger",on:{click:function(r){return e.adminDeleteNovels(t.index)}}},[e._v("刪除")])]}}])}),r("b-modal",{attrs:{id:"modal-adminUnpublishNovels",size:"lg",centered:"","ok-title":"下架","cancel-title":"取消編輯","ok-variant":"danger","cancel-variant":"success","header-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"body-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"footer-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher}},on:{ok:function(t){return e.updatePublish(!1)}}},[r("div",{staticClass:"h2 text-center"},[e._v("是否下架此篇文作?")])]),r("b-modal",{attrs:{id:"modal-adminRepublishNovels",size:"lg",centered:"","ok-title":"重新上架","cancel-title":"取消編輯","ok-variant":"success","cancel-variant":"danger","header-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"body-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"footer-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher}},on:{ok:function(t){return e.updatePublish(!0)}}},[r("div",{staticClass:"h2 text-center"},[e._v("是否重新上架此篇文作?")])]),r("b-modal",{attrs:{id:"modal-adminDeleteNovels",size:"lg",centered:"","ok-title":"確認刪除","cancel-title":"取消刪除","ok-variant":"danger","cancel-variant":"success","header-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"body-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"footer-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher}},on:{ok:e.deleteNovels}},[r("div",{staticClass:"h2 deleteSignal mx-auto my-3"},[r("div",{staticClass:"deleteSignalText"},[e._v("!")])]),r("div",{staticClass:"h2 text-center"},[e._v("是否刪除此文作?")])])],1)},s=[],i=r("1da1"),n=r("5530"),c=(r("a434"),r("96cf"),{data:function(){return{form:{publish:!1},adminnovels:[],fields:[{key:"image",label:"圖片"},{key:"title",label:"文作名稱"},{key:"novelType",label:"文作分類"},{key:"publishDate",label:"上傳日期"},{key:"publishState",label:"狀態"},{key:"unpublish",label:"下架"},{key:"republish",label:"重新上架"},{key:"delete",label:"刪除"}]}},methods:{adminUnpublishNovels:function(e){this.form=Object(n["a"])(Object(n["a"])({},this.adminnovels[e]),{},{image:null,index:e}),this.$bvModal.show("modal-adminUnpublishNovels")},adminRepublishNovels:function(e){this.form=Object(n["a"])(Object(n["a"])({},this.adminnovels[e]),{},{image:null,index:e}),this.$bvModal.show("modal-adminRepublishNovels")},adminDeleteNovels:function(e){this.form=Object(n["a"])(Object(n["a"])({},this.adminnovels[e]),{},{image:null,index:e}),this.$bvModal.show("modal-adminDeleteNovels")},updatePublish:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.api.patch("/novels/admin/"+t.form._id,{publish:e},{headers:{authorization:"Bearer "+t.user.token}});case 3:a=r.sent,s=a.data,t.adminnovels[t.form.index]=Object(n["a"])(Object(n["a"])({},t.form),{},{publish:e,image:s.result.image}),t.$refs.table.refresh(),console.log(s),t.$swal({icon:"success",title:"成功",text:"編輯成功"}),t.$bvModal.hide("modal-adminUnpublishNovels"),r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](0),t.$swal({icon:"error",title:"錯誤",text:r.t0.response.data.message});case 15:case"end":return r.stop()}}),r,null,[[0,12]])})))()},deleteNovels:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.delete("/novels/admin/"+e.form._id,{headers:{authorization:"Bearer "+e.user.token}});case 3:r=t.sent,a=r.data,console.log(a.result),e.$swal({icon:"success",title:"成功",text:"文作刪除成功"}),e.adminnovels.splice(e.form.index,1),e.$refs.table.refresh(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.$swal({icon:"error",title:"錯誤",text:"文作刪除失敗"});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.get("novels/all",{headers:{authorization:"Bearer "+e.user.token}});case 3:r=t.sent,a=r.data,e.adminnovels=a.result,e.adminnovels.reverse(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$swal({icon:"error",title:"錯誤",text:"文作取得失敗"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}),l=c,o=r("2877"),u=Object(o["a"])(l,a,s,!1,null,null,null);t["default"]=u.exports},da78:function(e,t,r){"use strict";r("859e")},f810:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"my-5",attrs:{id:"admincarousel"}},[r("b-row",{staticClass:"mb-5"},[r("b-col",{staticClass:"h1 rounded text-white text-center py-3 aino-bg-primary aino-rounded",class:{labelDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},attrs:{cols:"12"}},[e._v("主頁輪播圖管理")])],1),r("b-container",{attrs:{id:"carouselChange",fluid:""}},[r("b-row",[r("b-col",{staticClass:"add mb-5",attrs:{cols:"4"}},[r("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"modal-carousel",expression:"'modal-carousel'"}]},[e._v("新增")])],1),e._l(e.carousel,(function(t){return r("b-col",{key:t._id,staticClass:"d-flex justify-content-center mb-5",attrs:{cols:"4"}},[r("b-card",{staticClass:"carousel-height",attrs:{"img-src":t.carouselImage}},[r("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"modal-delete"+t._id,expression:"'modal-delete' + image._id"}]},[e._v("刪除圖片"),r("b-modal",{attrs:{size:"md",centered:"","ok-title":"確認刪除","cancel-title":"取消刪除","ok-variant":"danger","cancel-variant":"success",id:"modal-delete"+t._id,"header-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"body-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"footer-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher}},on:{ok:function(r){return e.deleteCarousel(t._id)}}},[r("div",{staticClass:"h2 deleteSignal mx-auto my-3"},[r("div",{staticClass:"deleteSignalText"},[e._v("!")])]),r("div",{staticClass:"text-center my-5 kakunin"},[e._v("是否刪除此圖片?")])])],1)],1)],1)}))],2),r("b-modal",{attrs:{id:"modal-carousel",size:"md",centered:"","ok-title":"上傳","cancel-title":"取消上傳",title:"新增主頁輪播圖","ok-variant":"success","cancel-variant":"danger","header-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"body-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher},"footer-class":{modalDark:e.user.themeSwitcher,light:!e.user.themeSwitcher}},on:{ok:function(t){return e.addCarousel()},hidden:e.resetForm}},[r("b-row",[r("b-col",{staticClass:"d-flex justify-content-center align-items-center",attrs:{cols:"12"}},[r("img-inputer",{attrs:{accept:"image/*",theme:"dark",size:"large",bottomText:"點選或拖曳圖片以修改",hoverText:"點選或拖曳圖片以修改",placeholder:"點選或拖曳選擇圖片","max-size":2048,"exceed-size-text":"檔案大小不能超過"},model:{value:e.carouselImage,callback:function(t){e.carouselImage=t},expression:"carouselImage"}})],1)],1)],1)],1)],1)},s=[],i=r("1da1"),n=(r("96cf"),{data:function(){return{carousel:[],carouselImage:"",modalSubmitting:!1}},methods:{addCarousel:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.modalSubmitting=!0,r=new FormData,r.append("image",e.carouselImage),t.prev=3,t.next=6,e.api.post("/pages",r,{headers:{authorization:"Bearer "+e.user.token}});case 6:a=t.sent,s=a.data,console.log(s.result),e.$swal({icon:"success",title:"成功",text:"新增輪播圖圖片成功"}),e.getimage(),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](3),e.$swal({icon:"error",title:"錯誤",text:"新增輪播圖圖片失敗"});case 16:case"end":return t.stop()}}),t,null,[[3,13]])})))()},deleteCarousel:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.api.delete("/pages/"+e,{headers:{authorization:"Bearer "+t.user.token}});case 3:t.$swal({icon:"success",title:"成功",text:"刪除圖片成功"}),t.getimage(),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"刪除圖片失敗"});case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},getimage:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.get("/pages");case 3:r=t.sent,a=r.data,console.log(a.result),e.carousel=a.result,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0.response.data.message);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},resetForm:function(e){this.modalSubmitting?e.preventDefault():this.carouselImage=""}},created:function(){this.getimage()}}),c=n,l=(r("43c0"),r("2877")),o=Object(l["a"])(c,a,s,!1,null,null,null);t["default"]=o.exports}}]);
//# sourceMappingURL=admin.5e6d62a9.js.map